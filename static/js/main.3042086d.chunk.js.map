{"version":3,"sources":["lib/fsm/FSM.ts","lib/fsm/use-fsm.ts","components/FsmGraph.tsx","utils/statesToGraph.ts","components/FsmView.tsx","components/CodeView.tsx","atoms/Box.tsx","atoms/Select.tsx","atoms/Footer.ts","atoms/index.tsx","mock.ts","components/FsmDemo.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["FSM","states","initial","size","Error","undefined","has","keys","next","value","action","this","allowedActions","isValidAction","currentState","state","assertValidAction","nextState","get","assertValidState","dispatchEvent","StateChangedEvent","Set","EventTarget","EVENTS","stateChanged","current","prev","Event","useFsm","initialState","fsm","useMemo","useState","setCurrentState","doAction","useCallback","onChange","e","useEffect","addEventListener","dataRef","useRef","data","nodes","Array","from","entries","map","actions","id","label","color","border","Boolean","edges","filter","flatMap","i","target","to","statesToGraph","selectNodes","style","outlineWidth","height","width","graph","options","interaction","zoomView","selectable","dragView","dragNodes","selectConnectedEdges","background","highlight","smooth","enabled","type","roundness","length","arrows","inherit","physics","layout","randomSeed","getNetwork","ActionButton","styled","button","FsmGraph","Actions","key","onClick","disabled","div","SyntaxHighlighter","registerLanguage","js","children","language","codeTheme","Box","Select","selected","renderItem","item","Footer","footer","Theme","styles","css","trafficLight","Map","ballPointPen","passwordValidator","interviewProcess","demoNames","Object","demos","setSelected","Container","CodeView","FsmView","App","href","FsmDemo","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.3042086d.chunk.js","sourcesContent":["export type StateName = string;\nexport type ActionName = string;\nexport type States = Map<StateName, Actions>;\nexport type Actions = Map<ActionName, StateName> | null;\n\nexport default class FSM extends EventTarget {\n  static EVENTS = {\n    stateChanged: \"stateChanged\",\n  };\n  #states: States;\n  #currentState: StateName;\n\n  constructor(states: States, initial?: StateName) {\n    super();\n\n    if (states.size === 0) {\n      throw new Error(`states must not be empty`);\n    }\n\n    if (initial !== undefined) {\n      if (!states.has(initial)) {\n        throw new Error(`Initial state \"${initial}\" is not a valid state`);\n      }\n\n      this.#currentState = initial;\n    } else {\n      // Use first inserted key as initial\n      // Note from MDN: The keys() method returns the keys in insertion order.\n      this.#currentState = states.keys().next().value;\n    }\n\n    this.#states = states;\n  }\n\n  get currentState() {\n    return this.#currentState;\n  }\n\n  get allowedActions(): Set<ActionName> {\n    return new Set(this.#states.get(this.#currentState)?.keys());\n  }\n\n  isValidAction(action: ActionName) {\n    return this.allowedActions.has(action);\n  }\n\n  assertValidAction(action?: ActionName | null): asserts action {\n    if (!action || !this.isValidAction(action)) {\n      throw new Error(`State \"${this.currentState}\" has no \"${action}\" action`);\n    }\n  }\n\n  assertValidState(state?: StateName | null): asserts state {\n    if (!state || !this.#states.has(state)) {\n      throw new Error(`State \"${state}\" is not valid`);\n    }\n  }\n\n  doAction(action: ActionName) {\n    this.assertValidAction(action);\n\n    // I use `!` because we should allays have a state entry for\n    //  the current state as its asserted in assertValidAction\n    const nextState = this.#states.get(this.#currentState)!.get(action);\n\n    this.assertValidState(nextState);\n\n    this.dispatchEvent(\n      new StateChangedEvent(nextState, action, this.currentState)\n    );\n\n    this.#currentState = nextState;\n  }\n}\n\nexport class StateChangedEvent<StateName> extends Event {\n  prev: StateName;\n  action: ActionName;\n  current: StateName;\n\n  constructor(current: StateName, action: ActionName, prev: StateName) {\n    super(FSM.EVENTS.stateChanged);\n\n    this.prev = prev;\n    this.action = action;\n    this.current = current;\n  }\n}\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport FSM, { States, ActionName, StateChangedEvent, StateName } from \"./FSM\";\n\ntype FsmHookResult = [StateName, Pick<FSM, \"doAction\" | \"allowedActions\">];\n\nfunction useFsm(states: States, initialState?: StateName): FsmHookResult {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const fsm = useMemo<FSM>(() => new FSM(states, initialState), []);\n\n  const [currentState, setCurrentState] = useState<StateName>(fsm.currentState);\n  const doAction = useCallback((action: ActionName) => fsm.doAction(action), [\n    fsm,\n  ]);\n  const onChange = useCallback(\n    (e: Event) => setCurrentState((e as StateChangedEvent<StateName>).current),\n    []\n  );\n\n  useEffect(() => {\n    fsm.addEventListener(FSM.EVENTS.stateChanged, onChange);\n    return () => fsm.addEventListener(FSM.EVENTS.stateChanged, onChange);\n  }, [fsm, onChange]);\n\n  const { allowedActions } = fsm;\n  return [\n    currentState!,\n    {\n      doAction,\n      allowedActions,\n    },\n  ];\n}\n\nexport default useFsm;\n","import React, { useEffect, useMemo, useRef } from \"react\";\nimport statesToGraph from \"../utils/statesToGraph\";\nimport Graph from \"react-graph-vis\";\nimport { States, StateName } from \"../lib/fsm\";\n\nconst color = \"black\";\n\ntype Props = {\n  states: States;\n  initial?: StateName;\n  current: StateName;\n};\n\nexport default function ({ states, initial, current }: Props) {\n  const dataRef = useRef<any>(null);\n\n  const data = useMemo(() => statesToGraph(states), [states]);\n\n  useEffect(() => {\n    if (current) {\n      dataRef.current.selectNodes([current]);\n    }\n  }, [current]);\n\n  return (\n    <div\n      style={{\n        outlineWidth: 0,\n        height: \"400px\",\n        width: \"500px\",\n      }}\n    >\n      <Graph\n        graph={data}\n        options={{\n          interaction: {\n            zoomView: false,\n            selectable: false,\n            dragView: false,\n            dragNodes: false,\n            selectConnectedEdges: false,\n          },\n          nodes: {\n            color: {\n              background: \"white\",\n              border: color,\n              highlight: { background: \"white\", border: \"green\" },\n            },\n          },\n          edges: {\n            smooth: {\n              enabled: true,\n              type: \"dynamic\",\n              roundness: 0.5,\n            },\n            length: 150,\n            arrows: { to: true },\n            color: {\n              inherit: false,\n              highlight: color,\n              color: color,\n            },\n          },\n          physics: { enabled: true },\n          layout: { randomSeed: 1 },\n        }}\n        getNetwork={(data) => (dataRef.current = data)}\n      />\n    </div>\n  );\n}\n","import { States } from \"../lib/fsm\";\n\nexport default function statesToGraph(states: States) {\n  return {\n    nodes: Array.from(states.entries()).map(([state, actions]) => ({\n      id: state,\n      label: state,\n      color: { border: Boolean(actions) ? undefined : \"red\" },\n    })),\n    edges: Array.from(states.entries())\n      .filter(([_, actions]) => actions !== null)\n      .flatMap(([state, actions], i) => {\n        return Array.from(actions!.entries()).map(([action, target]) => ({\n          from: state,\n          to: target,\n          label: action,\n        }));\n      }),\n  };\n}\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { useFsm, States } from \"../lib/fsm\";\nimport FsmGraph from \"./FsmGraph\";\n\nconst ActionButton = styled.button`\n  padding: 0.5rem 1rem;\n  &:first-of-type {\n    margin-left: 1rem;\n  }\n  &:not(:last-of-type) {\n    margin-right: 1rem;\n  }\n`;\n\nexport default function ({ states }: { states: States }) {\n  const [current, { allowedActions, doAction }] = useFsm(states);\n  return (\n    <>\n      <FsmGraph states={states} current={current} />\n      <Actions>\n        <pre>Current state: {current}</pre>\n        <pre>\n          Actions:\n          {allowedActions.size ? (\n            Array.from(allowedActions).map((action) => (\n              <ActionButton key={action} onClick={() => doAction(action)}>\n                {action}\n              </ActionButton>\n            ))\n          ) : (\n            <ActionButton disabled>N/A</ActionButton>\n          )}\n        </pre>\n      </Actions>\n    </>\n  );\n}\n\nconst Actions = styled.div`\n  display: flex;\n\n  align-items: center;\n  justify-content: space-around;\n`;\n","import React from \"react\";\nimport { Light as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport js from \"react-syntax-highlighter/dist/esm/languages/hljs/javascript\";\nimport codeTheme from \"react-syntax-highlighter/dist/esm/styles/hljs/github-gist\";\n\nSyntaxHighlighter.registerLanguage(\"javascript\", js);\n\nexport default function ({ children }: { children: string }) {\n  return (\n    <SyntaxHighlighter language={\"javascript\"} style={codeTheme}>\n      {children}\n    </SyntaxHighlighter>\n  );\n}\n","import styled from \"@emotion/styled\";\n\nconst Box = styled.div`\n  border: 1px solid var(--color-bg-secondary);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow) var(--color-shadow);\n  margin: 1rem;\n  padding: 1.25rem;\n`;\n\nexport { Box };\n","import React, { ReactNode } from \"react\";\n// import styled from \"@emotion/styled\";\n\ntype Props<T> = {\n  selected?: T | null;\n  options: Array<T>;\n  onChange(selected: T): void;\n  renderItem?(item: T): ReactNode;\n};\n\nfunction Select<T extends string>({\n  options,\n  selected,\n  onChange,\n  renderItem,\n}: Props<T>) {\n  return (\n    <select onChange={(e) => onChange(e.target.value as T)}>\n      {options.map((item) => (\n        <option selected={item === selected}>\n          {renderItem?.(item) || item}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport { Select };\n","import styled from \"@emotion/styled\";\n\nconst Footer = styled.footer`\n  text-align: center;\n  padding: 1rem;\n`;\n\nexport { Footer };\n","import React from \"react\";\nimport { css, Global } from \"@emotion/core\";\n\nexport function Theme() {\n  return (\n    <Global\n      styles={css`\n        :root {\n          --border-radius: 5px;\n          --box-shadow: 2px 2px 10px;\n          --color: #118bee;\n          --color-accent: #118bee15;\n          --color-bg: #fff;\n          --color-bg-secondary: #e9e9e9;\n          --color-secondary: #920de9;\n          --color-secondary-accent: #920de90b;\n          --color-shadow: #f4f4f4;\n          --color-text: #000;\n          --color-text-secondary: #999;\n          --font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n            Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n          --hover-brightness: 1.2;\n          --justify-important: center;\n          --justify-normal: left;\n          --line-height: 1.5;\n          --width-card: 285px;\n          --width-card-medium: 460px;\n          --width-card-wide: 800px;\n          --width-content: 1080px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n          :root {\n            --color: #0097fc;\n            --color-accent: #0097fc4f;\n            --color-bg: #333;\n            --color-bg-secondary: #555;\n            --color-secondary: #e20de9;\n            --color-secondary-accent: #e20de94f;\n            --color-shadow: #bbbbbb20;\n            --color-text: #f7f7f7;\n            --color-text-secondary: #aaa;\n          }\n        }\n\n        h1,\n        h2,\n        h3 {\n          text-align: center;\n        }\n      `}\n    />\n  );\n}\n\nexport { Box } from \"./Box\";\nexport { Select } from \"./Select\";\nexport { Footer } from \"./Footer\";\n","export const trafficLight = {\n  data: new Map([\n    [\"red\", new Map([[\"yellow\", \"yellow\"]])],\n    [\n      \"yellow\",\n      new Map([\n        [\"red\", \"red\"],\n        [\"green\", \"green\"],\n      ]),\n    ],\n    [\"green\", new Map([[\"yellow\", \"yellow\"]])],\n  ]),\n};\n\nexport const ballPointPen = {\n  data: new Map([\n    [\"close\", new Map([[\"click\", \"open\"]])],\n    [\"open\", new Map([[\"click\", \"close\"]])],\n  ]),\n};\n\nexport const passwordValidator = {\n  data: new Map([\n    [\n      \"locked\",\n      new Map([\n        [\"press 1\", \"1\"],\n        [\"other digit\", \"locked\"],\n      ]),\n    ],\n    [\n      \"1\",\n      new Map([\n        [\"press 2\", \"2\"],\n        [\"other digit\", \"locked\"],\n      ]),\n    ],\n    [\n      \"2\",\n      new Map([\n        [\"press 3\", \"3\"],\n        [\"other digit\", \"locked\"],\n      ]),\n    ],\n    [\n      \"3\",\n      new Map([\n        [\"press 4\", \"4\"],\n        [\"other digit\", \"locked\"],\n      ]),\n    ],\n    [\n      \"4\",\n      new Map([\n        [\"press *\", \"unlocked\"],\n        [\"other digit\", \"locked\"],\n      ]),\n    ],\n    [\"unlocked\", new Map([[\"press lock\", \"locked\"]])],\n  ]),\n};\n\nexport const interviewProcess = {\n  data: new Map([\n    [\n      \"start\",\n      new Map([\n        [\"go\", \"phone interview\"],\n        [\"no go\", \"withdrawn\"],\n      ]),\n    ],\n    [\n      \"phone interview\",\n      new Map([\n        [\"go\", \"technical interview\"],\n        [\"no go\", \"withdrawn\"],\n      ]),\n    ],\n    [\n      \"technical interview\",\n      new Map([\n        [\"go\", \"final interview\"],\n        // [\"no go\", \"withdrawn\"],\n      ]),\n    ],\n    [\n      \"final interview\",\n      new Map([\n        [\"no go\", \"withdrawn\"],\n        [\"go\", \"hired\"],\n      ]),\n    ],\n    [\"hired\", new Map([[\"work\", \"hired\"]])],\n    [\"withdrawn\", null],\n  ]),\n};\n","import FsmView from \"./FsmView\";\nimport React, { useMemo, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport CodeView from \"./CodeView\";\nimport { Box, Select } from \"../atoms\";\nimport * as demos from \"../mock\";\n\nexport default function () {\n  const demoNames = useMemo<Array<keyof typeof demos>>(\n    () => Object.keys(demos) as Array<keyof typeof demos>,\n    []\n  );\n\n  const [selected, setSelected] = useState<keyof typeof demos>(demoNames[0]);\n\n  return (\n    <Container>\n      <CodeView>\n        {\n          /* TODO: Load from file? */\n          \"function FSM() {\\n\" +\n            \"  const [current, { allowedActions, doAction }] = useFsm(states);\\n\" +\n            \"  return (\\n\" +\n            \"    <>\\n\" +\n            \"      <pre>Current state: {current}</pre>\\n\" +\n            \"      <pre>\\n\" +\n            \"        Actions:\\n\" +\n            \"        {allowedActions.size ? (\\n\" +\n            \"          Array.from(allowedActions).map((action) => (\\n\" +\n            \"            <button key={action} onClick={() => doAction(action)}>\\n\" +\n            \"              {action}\\n\" +\n            \"            </button>\\n\" +\n            \"          ))\\n\" +\n            \"        ) : (\\n\" +\n            \"          <button disabled>N/A</button>\\n\" +\n            \"        )}\\n\" +\n            \"      </pre>\\n\" +\n            \"    </>\\n\" +\n            \"  );\\n\" +\n            \"}\"\n        }\n      </CodeView>\n      <Box>\n        <pre>\n          const states ={\" \"}\n          <Select\n            selected={selected}\n            options={demoNames}\n            onChange={(item) => setSelected(item)}\n          />\n        </pre>\n        <FsmView key={selected} states={demos[selected].data} />\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-around;\n`;\n","import React from \"react\";\nimport FsmDemo from \"./components/FsmDemo\";\nimport { Footer, Theme } from \"./atoms\";\n\nexport default function App() {\n  return (\n    <>\n      <Theme />\n      <header>\n        <h1>react-fsm</h1>\n        <h2>\n          A react hook for creating{\" \"}\n          <a href={\"https://en.wikipedia.org/wiki/Finite-state_machine\"}>\n            Finite-state machine\n          </a>\n        </h2>\n      </header>\n      <main>\n        <FsmDemo />\n      </main>\n      <Footer>\n        Created by{\" \"}\n        <a href={\"https://github.com/daniel-hauser\"}>Daniel Hauser</a>\n      </Footer>\n    </>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}